/*@license
Fullscreen Image Zoom and Pan with Jquery
version 6.0.0

Original version by Samil Hazir (https://github.com/saplumbaga)
later versions by JM Alarcon (https://github.com/jmalarcon/)

https://github.com/saplumbaga/jquery.pan
https://github.com/jmalarcon/jquery.pan
 */
($=>{var pageOptions,init=!0;function throttle(func,limit){let lastFunc,lastRan;return function(){let context=this,args=arguments;lastRan?(clearTimeout(lastFunc),lastFunc=setTimeout(function(){Date.now()-lastRan>=limit&&(func.apply(context,args),lastRan=Date.now())},limit-(Date.now()-lastRan))):(func.apply(context,args),lastRan=Date.now())}}$.fn.extend({pan:function(options){var $panWrapper,panImg,zi,zo,rc,ra,link,close;function __getPointerPos(event,prop){var pos=event[prop];return null==pos&&(pos=0,event.touches?pos=event.touches[0][prop]:event.originalEvent&&event.originalEvent.touches&&(pos=event.originalEvent.touches[0][prop])),pos}function panInit(event){var panImg=$(".panWrapper img.i"),panWrapper=$(".panWrapper"),w=parseInt(panImg.css("width")),h=parseInt(panImg.css("height")),vpW=panWrapper.width(),vpH=panWrapper.height(),angle=parseInt(panImg.data("rotAngle"))||0,ml=-((w=angle%180!=0?[h,h=w][0]:w)-vpW),mt=-(h-vpH),scrollHOffset=window.pageXOffset||document.documentElement.scrollLeft,scrollVOffset=window.pageYOffset||document.documentElement.scrollTop,scrollHOffset=(event=>__getPointerPos(event,"pageX"))(event)-scrollHOffset;(vpW=panWrapper.width())<(scrollHOffset=scrollHOffset<0?0:scrollHOffset)&&(scrollHOffset=vpW);var event=(event=>__getPointerPos(event,"pageY"))(event)-scrollVOffset,nl=((vpH=panWrapper.height())<(event=event<0?0:event)&&(event=vpH),Math.floor(ml*scrollHOffset/vpW)),nt=Math.floor(mt*event/vpH),scrollVOffset=(vpW-w)/2,panWrapper=(vpH-h)/2,tX=(w<vpW&&h<vpH?(nl=scrollVOffset,nt=panWrapper):w<vpW?nl=scrollVOffset:h<vpH&&(nt=panWrapper),0),tY=0;switch(angle%360){case 0:tX=nl,tY=nt;break;case 90:case-270:tX=nt,tY=-(w+nl);break;case 180:case-180:tX=-(w+nl),tY=-(h+nt);break;case 270:case-90:tX=-h-nt,tY=nl}panImg.css("transform","rotate("+angle+"deg) translate("+tX+"px,"+tY+"px)")}init&&(init=!1,pageOptions=$.extend({showRotationControls:!0,minLoadingTime:0,wheelZoomSpeed:100},options="boolean"==typeof options?{showRotationControls:options}:options),options=document.createElement("div"),($panWrapper=$(options)).addClass("panWrapper"),panImg=document.createElement("img"),$(panImg).addClass("i").css("position","absolute"),loadingImg=document.createElement("div"),$(loadingImg).attr("id","loading").addClass("loading"),$panWrapper.append(loadingImg),loadingImg=document.createElement("div"),$(loadingImg).addClass("buttonsWrapper"),zi=document.createElement("a"),$(zi).addClass("controls in"),zo=document.createElement("a"),$(zo).addClass("controls out"),pageOptions.showRotationControls&&(rc=document.createElement("a"),$(rc).addClass("controls rc"),ra=document.createElement("a"),$(ra).addClass("controls ra")),link=document.createElement("a"),$(link).addClass("controls link"),close=document.createElement("a"),$(close).addClass("controls close"),$panWrapper.append(close),$(loadingImg).append(zi),pageOptions.showRotationControls&&$(loadingImg).append(rc),$(loadingImg).append(link),pageOptions.showRotationControls&&$(loadingImg).append(ra),$(loadingImg).append(zo),$panWrapper.append(panImg),$panWrapper.append(loadingImg),$("body").append(options),$(zi).on("click",function(e){var panImg=$(".panWrapper img.i");panImg.css("width",parseInt(1.2*parseInt(panImg.css("width")))),panInit(e)}),$(zo).on("click",function(e){var panImg=$(".panWrapper img.i");panImg.css("width",parseInt(parseInt(panImg.css("width"))/1.2)+1),panInit(e)}),pageOptions.showRotationControls&&($(rc).on("click",function(e){var panImg=$(".panWrapper img.i").first(),angle=parseInt(panImg.data("rotAngle"))||0;panImg.css({transform:"rotate("+(angle=(angle+90)%360)+"deg)"}),panImg.data("rotAngle",angle),panInit(e)}),$(ra).on("click",function(e){var panImg=$(".panWrapper img.i").first(),angle=panImg.data("rotAngle")||0;panImg.css({transform:"rotate("+(angle=(angle-90)%360)+"deg)"}),panImg.data("rotAngle",angle),panInit(e)})),$(close).on("click",function(e){$(".panWrapper").fadeOut("slow",function(){var panImg=$(".panWrapper img.i").first();panImg.data("rotAngle",0),panImg.css({transform:"rotate(0)"}),$(link).removeAttr("href").removeAttr("target"),window.document.body.classList.remove("no-scroll")})}),$(panImg).on("click",function(){$(close).trigger("click")}),$panWrapper.on("mousemove",function(e){panInit(e)}),options.addEventListener("touchmove",throttle(function(e){panInit(e)},pageOptions.wheelZoomSpeed),{passive:!0}),$("body").on("keydown",function(e){27==e.keyCode&&$(close).trigger("click")}),options.addEventListener("wheel",throttle(function(wheelEvent){(0<wheelEvent.deltaY?$(zo):$(zi)).trigger("click"),panInit(wheelEvent)},pageOptions.wheelZoomSpeed),{passive:!0}));var loadingImg=$(this).filter(function(){if($(this).attr("data-big"))return!0;var root,imgElt,nW,nH,w,imgElts="IMG"==(root=this).tagName?[root]:0<(root=$(root).find("img")).length?root.get():null;if(0<imgElts.length)for(var i=0;i<imgElts.length;i++)if(imgElt=imgElts[i],w=nH=nW=void 0,imgElt&&(imgElt.getAttribute("data-big")||(nW=imgElt.naturalWidth||0,nH=imgElt.naturalHeight||0,w=$(imgElt).outerWidth(),imgElt=$(imgElt).outerHeight(),w<nW)||imgElt<nH))return!0;return!1});return loadingImg.css("cursor","zoom-in"),loadingImg.on("click",function(e){var t=$(this),big=t.attr("data-big");if(null==big){if("IMG"!=e.target.tagName)return;big=e.target.getAttribute("data-big")||e.target.src}var href=t.attr("href"),linkElt=t,t=(href||0<(t=t.parents("a")).length&&(href=(linkElt=$(t[0])).attr("href")),href&&$(link).attr("href",href).attr("target",linkElt.attr("target")).attr("title",linkElt.attr("title")?linkElt.attr("title"):href),$("#loading").addClass("loading"),$(".panWrapper img.i").css("display","none").attr("src",""));return window.document.body.classList.add("no-scroll"),$(".panWrapper").show(),t.css("width","auto").attr("src",big).on("load",function(){function showImage(){$("#loading").removeClass("loading"),target.style.display=""}var target=this;0<pageOptions.minLoadingTime?(panInit(e),setTimeout(function(){showImage()},pageOptions.minLoadingTime)):(panInit(e),showImage())}),!1}),loadingImg}})})(jQuery);
//# sourceMappingURL=jquery.pan.min.js.map